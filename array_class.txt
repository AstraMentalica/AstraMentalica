Moj predlog (da bo dolgoroÄno pregledno)

Za poti, privilege, varnost â†’ daj v en glavni array $config.
Za pogoste helper funkcije â†’ imej jih posebej (funkcije.php).
$GLOBALS se raje izogibaj, ker bo dolgoroÄno zmeÅ¡njava.
ÄŒe je nekaj fiksno in se nikoli ne spreminja (npr. verzija, ime aplikacije) â†’ uporabi define().
ðŸ‘‰ Torej, ja: spremenljivke so lahko globalne, ampak bolj zdravo je,
da jih definiraÅ¡ v strukturi ($config), kot pa da jih meÄeÅ¡ v $GLOBALS.

$config z vsemi potmi, privilegiji, moduli, varnostjo
plus nekaj define() konstant za stvari, ki so res fiksne (npr. verzija, ime sistema)?


ðŸ”¹ MoÅ¾nosti, kako to speljati
1. Ena â€œnejasnaâ€ globalna spremenljivka (array)
Namesto $config['poti']['osnova'] â†’ uporabiÅ¡ $globalsEther['x1'].
// spremenljivke.php
$globalsEther = [
    'x1' => __DIR__,                // osnovni direktorij
    'x2' => __DIR__ . '/moduli/',   // mapa modulov
    'x3' => '/uploads/',            // mapa za nalaganje
];
Potem kliÄeÅ¡:require $globalsEther['x2'] . "uporabniki.php";
âœ… Prednost: niÄ od zunaj ne pove, kaj je x1, x2, x3.
âŒ Slabost: manj berljivo zate, Äe si ne zabeleÅ¾iÅ¡.

2. Generator kljuÄev
Namesto roÄnih imen, jih generiraÅ¡ ob nalaganju:
// spremenljivke.php
$globalsEther = [];
$globalsEther[md5('osnova')] = __DIR__;
$globalsEther[md5('moduli')] = __DIR__ . '/moduli/';
Dostop:require $globalsEther[md5('moduli')] . "uporabniki.php";
âœ… Prednost: Å¡e bolj zakrito, saj se â€œkljuÄâ€ ne vidi.
âŒ Slabost: precej bolj nerodno za brati in vzdrÅ¾evat.

3. Konstante z nejasnimi imeni
define('GE_X1', __DIR__);
define('GE_X2', __DIR__ . '/moduli/');
Dostop:require GE_X2 . "uporabniki.php";
âœ… Prednost: vedno globalno dostopno, niÄ ne razkrije pomena.
âŒ Slabost: konstante so fiksne, jih ne moreÅ¡ enostavno menjati ob runtime.

													ðŸ“Œ Moj predlog
ÄŒe hoÄeÅ¡ najbolj praktiÄno + dovolj zakrito â†’ uporabi array z nejasnim imenom (primer 1).
ÄŒe hoÄeÅ¡ maksimalno zamegljeno (varnost pred oÄmi, ne pred runtime napadi) â†’ uporabi hash kljuÄe (primer 2).
ÄŒe hoÄeÅ¡ res fiksno in globalno â†’ konstante z nejasnimi imeni (primer 3).

Ether = vse (globalne poti, infrastruktura) â€” OK; v spremenljivke.php daj kot $GlobalsEther (array).
Sidro = sistem, zasidrano (kernel, core nastavitve) â€” $GlobalsSidro.
Globalno (Svet) = tisto, kar je vidno uporabniku (templati, javaski, CSS) â€” $GlobalsSvet.
Voda = moduli, neskonÄno dodajanje â†’ $GlobalsVoda (array modulov, loader za module).
Zrak (uporabnik) = podatki o uporabniku / session â†’ $GlobalsZrak ali $GlobalsUporabnik.


1. index.php -> require_once "globalno.php"; 

2. globalno.php -> require_once "spremenljivke.php";  // tukaj so vsi tvoji Ether, Voda, Zrak,


<?php
// =============================
// spremenljivke.php
// =============================
// Tu definiramo vse â€œglobalneâ€ podatke v en array $Globals
// Struktura sledi tvoji metafori:
// Ether  = vse (osnovne poti, konfiguracije)
// Sidro  = sistem, zasidrano, core nastavitve
// Svet   = tisto, kar je vidno uporabniku (templati, skripte)
// Voda   = moduli, neskonÄno dodajanje
// Zrak   = uporabnik, session, podatki v runtime
// =============================

$Globals = [
    'Ether' => [
        'root' => '/var/www/',
        'config' => '/etc/project/config.php',
    ],
    'Sidro' => [
        'db_host' => 'localhost',
        'db_name' => 'moja_baza',
    ],
    'Svet' => [
        'public' => '/public/',
        'assets' => '/assets/',
    ],
    'Voda' => [
        'moduli' => [], // tukaj se bodo dodajali moduli sproti
    ],
    'Zrak' => [
        'user' => null,
        'session' => [],
    ]
];



<?php
// =============================
// Globals.php
// =============================
// Class za hibridni pristop: 
// 1) $Globals array Å¡e vedno obstaja in ga lahko uporabljaÅ¡ direktno
// 2) Class metoda Globals::get() omogoÄa varen dostop z logiko
// =============================

class Globals {
    private static $data; // shranimo referenco na array $Globals

    // Inicializacija class-a z $Globals arrayem
    public static function init(&$globals) {
        self::$data = $globals;
    }

    // Varnostna metoda za dostop do podatkov
    public static function get($category, $key) {
        // ÄŒe category ali key ne obstaja, vrne null
        return self::$data[$category][$key] ?? null;
    }

    // Lahko se kasneje doda setter, npr. Globals::set(...)
}

<?php
// =============================
// V globalno.php (loader) â€œnaloÅ¾imoâ€ vse, da index.php ostane Äista vstopna toÄka
// =============================
require_once "spremenljivke.php";	// 1) NaloÅ¾i spremenljivke (tvoj array)
require_once "Globals.php";			// 2) NaloÅ¾i Globals class
Globals::init($Globals);			// 3) Inicializiramo class z naÅ¡im arrayem
// Zdaj imamo dva naÄina za dostop:
echo $Globals['Ether']['root'];         // /var/www/ 	// a) hitri array stil
echo Globals::get('Sidro', 'db_host');  // localhost 	// b) bolj varen class stil


âœ… Prednosti te reÅ¡itve
Preglednost â€“ vse â€œglobalneâ€ stvari so na enem mestu ($Globals).
Fleksibilnost â€“ Å¡e vedno lahko piÅ¡eÅ¡ kot array, kadar hoÄeÅ¡ hitro.
Varnost â€“ preko Globals::get() lahko kasneje dodaÅ¡ pravila, npr. access control, debug logging â€¦
Enostavna razÅ¡iritev â€“ npr. lahko dodaÅ¡ $Globals['Voda']['nov_modul'] = 'modulX'; ali nove kategorije.
Metafora o elementih â€“ Ether, Sidro, Voda, Zrak, Svet ostane tvoja â€œfilozofijaâ€ in hkrati praktiÄna koda.

<?php
// spremenljivke.php
$Globals = [
    'Ether' => ['root' => '/var/www/'],
    'Voda' => ['moduli' => []],
    'Zrak' => ['user' => null, 'session' => []]
];

// Globals.php (varnostni class)
class GlobalsSecure {
    private static $data = [
        'Sidro' => [ // sistemske kritiÄne nastavitve
            'db_host' => 'localhost',
            'db_user' => 'root',
            'db_pass' => 'skriveno',
            'db_name' => 'moja_baza'
        ]
    ];
    public static function get($category, $key) {
        return self::$data[$category][$key] ?? null;
    }
}
// global.php (loader)
require_once "spremenljivke.php";
require_once "Globals.php";
// uporaba
echo $Globals['Ether']['root'];                 // hitri dostop
echo GlobalsSecure::get('Sidro', 'db_user');    // varen dostop



<?php
// =============================
// spremenljivke.php
// =============================
// Osnovni array $Globals za hitro in fleksibilno uporabo
//  - Ether: vse dodatne datoteke modulov/helper/codex
//  - Sidro: sistemske nastavitve, baze, funkcije (kritiÄno, kasneje lahko class)
//  - Svet: vidni del aplikacije (UI, layout, navigacija)
//  - Voda: moduli, dodatki (neskonÄno dodajanje)
//  - Zrak: uporabniki, session, privilegiji
// =============================

$Globalno = [
    // ------------- Poti -------------
    'eter' => __DIR__ . '/../datoteke',                 // veter
    'svet'  => __DIR__ . '/../globalno',                // svet
    'sidro' => __DIR__,                                 // sistem
    'voda'  => __DIR__ . '/../moduli',                  // morje
    'zrak'  => __DIR__ . '/globalno/uporabniki',       // suho

    // ------------- Privilegiji uporabnikov -------------
    'S0' => 0,  // ni uporabnik
    'S1' => 1,  // navadni
    'S2' => 2,  // VIP
    'S3' => 3,  // ekstra VIP
    'S4' => 4,  // super VIP
    'S5' => 5,  // super admin

    // ------------- Moduli / nivoji sistema -------------
    'K00' => 'jedro',
    'K01' => 'skrbnik',
    'K1'  => 'globalno',
    'K2'  => 'modul',
    'K3'  => 'modul dodatki',

    // ------------- Ostale sistemske spremenljivke -------------
    'separator'    => DIRECTORY_SEPARATOR,
    'aplikacija'   => 'astramystica',
    'debug'        => true,
    'je_globalno'  => true,

    // ------------- Predpone funkcij -------------
    'PRED_SI' => 'si_',
    'PRED_G'  => 'g_',
    'PRED_UI' => 'ui_',
    'PRED_M'  => 'm_',
];


// =============================
// pot /SISTEM/globalno.php (loader)
// =============================
// Loader za index.php, inicializira vse globalne nastavitve
require_once "spremenljivke.php";
require_once "varni_razredi.php";

// Uporaba array stila (hitro)
echo $Globalno['eter'];                  // /datoteke
echo $Globalno['svet'];                   // /globalno
<?php
// =============================
// pot /SISTEM/sistem/spremenljivke.php
// =============================
// Osnovni array $Globalno za hitro in fleksibilno uporabo
//  - eter: vse dodatne datoteke modulov/helper/codex
//  - sidro: sistemske nastavitve, baze, funkcije (kritiÄno, kasneje lahko class)
//  - svet: vidni del aplikacije (UI, layout, navigacija)
//  - voda: moduli, dodatki (neskonÄno dodajanje)
//  - zrak: uporabniki, session, privilegiji
// =============================

$Globalno = [
    // ------------- Poti -------------
    'eter' => __DIR__ . '/../../DATOTEKE',
    'svet'  => __DIR__ . '/../../GLOBALNO',
    'sidro' => __DIR__,. '/../sistem',   
    'voda'  => __DIR__ . '/../../MODULI',
    'zrak'  => __DIR__ . '/../GLOBALNO/uporabniki',

    // ------------- Privilegiji uporabnikov -------------
    'S0' => 0,  // ni uporabnik
    'S1' => 1,  // navadni
    'S2' => 2,  // VIP
    'S3' => 3,  // ekstra VIP
    'S4' => 4,  // super VIP
    'S5' => 5,  // super admin

    // ------------- Moduli / nivoji sistema -------------
	'K0'	
	'K00' => 'jedro',
    'K01' => 'sistem',
	
    'K1'  => 'globalno',
    'K2'  => 'modul',
    'K3'  => 'modul dodatki',

    // ------------- Ostale sistemske spremenljivke -------------
    'separator'    => DIRECTORY_SEPARATOR,
    'aplikacija'   => 'astramystica',
    'debug'        => true,
    'je_globalno'  => true,

    // ------------- Predpone funkcij -------------
    'PRED_SI' => 'si_',
    'PRED_G'  => 'g_',
    'PRED_UI' => 'ui_',
    'PRED_M'  => 'm_',
];

// =============================
// varni_razred.php
// =============================
// KritiÄne nastavitve (baze, gesla, varnost), varne pred neposrednim pisanjem
// Dostop preko metod, da lahko kasneje dodaÅ¡ logiko (validacija, log, enkripcija)
class GlobalsSecure {
    private static $data = [
        'sidro' => [
            'db_host'      => 'localhost',
            'db_user'      => 'root',
            'db_pass'      => 'TvojeMoÄnoGeslo123!',
            'db_name'      => 'moja_baza',
        ],
        'debug' => false
    ];

    // Pridobi vrednost varne nastavitve
    public static function get($category, $key) {
        return self::$data[$category][$key] ?? null;
    }

    // Lahko dodaÅ¡ setter s kontrolami
    public static function set($category, $key, $value) {
        self::$data[$category][$key] = $value;
    }
}

// =============================
// globalno.php (loader)
// =============================
// Loader za index.php, inicializira vse globalne nastavitve
require_once "spremenljivke.php";
require_once "varni_razred.php";

// Uporaba array stila (hitro)
echo $Globalno['eter'];                  // /DATOTEKE
echo $Globalno['svet'];                   // /GLOBALNO
echo $Globalno['voda'];                   // /MODULI
// Uporaba class stila (varen dostop)
echo varni_razred::get('sidro', '');  

AstraMentalica/
â”œâ”€ SISTEM/ (sidro â€“ steber sistema)
â”‚   â”œâ”€ globalno.php                   â† Loader (inicializacija $Globalno, varni_razred)
â”‚   â”œâ”€ /sistem/
â”‚   â”‚   â”œâ”€ spremenljivke.php              â† Vse globalne poti, privilegiji, moduli, predpone
â”‚   â”‚   â”œâ”€ varni_razred.php               â† Vse kritiÄne poti, 
â”‚   â”‚   â”œâ”€ kljuci.php                     â† Å ifrirane poti / varnostni kljuÄi
â”‚   â”œâ”€ /jedro/
â”‚   â”œâ”€ /uporabnik/ 
â”‚   â”œâ”€ /admin/
â”‚   â””â”€ /AI/
â”‚
â”œâ”€ /GLOBALNO/ 			(svet â€“ UI, frontend)
â”‚   â””â”€ /uporabniki/		(zrak â€“ seje in uporabniki) /je varno tukaj?
â”œâ”€ /MODULI/ 			(voda â€“ dodatki in funkcionalnosti)
â”œâ”€ /DATOTEKE/ 			(eter â€“ dodatne datoteke, helperji, codex)
â”œâ”€ index.php	â† Vstopna toÄka aplikacije


ðŸ“Œ KljuÄne smernice
Predpone
Predpona	Namen	Primer
$Seja	Centralni objekt seje	$Seja->prijava(), $Seja->uporabnik_ime
ui_	UporabniÅ¡ki vmesnik	ui_glava(), ui_navigacija()
m_	Moduli / funkcionalnosti	m_forum(), m_nakupovalni_kosar()
xi_	Logika / izraÄuni	xi_preveri_geslo(), xi_izraÄunaj_ceno()
g_	Globalne spremenljivke	$g_trenutni_uporabnik, $g_aktivni_modul
Varnost

CSRF zaÅ¡Äita preko $Seja->generiraj_csrf_zeton()

Omejevanje zahtevkov in zaÅ¡Äita seje

Sanitizacija vhodov (xi_sanitiziraj_vhod)

Omejitve modulov (demo modul omejen, globalni moduli uporabljajo vse poti)

Centralni objekt $Seja

Lastnosti: prijavljenost, ID, ime, vloga, CSRF Å¾eton, omejitve

Metode:

zaÄni_sejo(), prijava(), odjava()

generiraj_csrf_zeton(), preveri_csrf_zeton()

preveri_prijavo(), preveri_pravice(), zahtevaj_vlogo()

preveri_omejitev_zahtevkov()

Moduli
Vsak modul je samostojen, lahko deluje tudi izven glavnega sistema
Obvezne datoteke: konfiguracija.php, index.php
PriporoÄena: funkcije.php, predloge/, sredstva/
Pravila:
Predpone funkcij: m_
Privilegiji: minimalna vloga za dostop iz konfiguracije
Demo modul uporablja lokalne spremenljivke, globalni modul uporablja $Globals
UI funkcije
ui_glava($nastavitve)
ui_noga($nastavitve)
ui_navigacija()
ui_obvestila() in ui_dodaj_obvestilo()
PomoÅ¾ne: ui_formatiraj_datum(), ui_skrajÅ¡aj_besedilo(), ui_paginacija()

XI funkcije

ÄŒista logika in izraÄuni
Sanitizacija, preverjanje gesla, hashiranje, beleÅ¾enje napak/operacij
Primer uporabe: obdelava vnosa, preverjanje emaila, zapis napake in obvestilo UI
Globalne spremenljivke (G_)
$g_trenutni_uporabnik, $g_aktivni_modul, $g_tema, $g_postavitev
Dostopne povsod po inicializaciji
Preverjanje modulov in logike preko globalnih spremenljivk
Razvoj novih modulov

Ustvari mapo /MODULI/ime_modula/
Dodaj konfiguracija.php z metapodatki
Implementiraj funkcije.php z m_ predpono
Ustvari index.php z glavno vsebino
Testiraj samostojno in v globalnem sistemu
Dokumentiraj vse funkcije
To je osnova sheme in smernic.
ÄŒe Å¾eliÅ¡, lahko naslednji korak pripravim poln predlog strukture datotek z Bootstrap loaderjem, kjer bodo:

$Globals array
GlobalsSecure class
$Seja centralni objekt
Hibridni modul loader z uporabo predpon, CSRF, omejitvami in UI funkcij
To bo pripravljen za takojÅ¡njo implementacijo.

Globalne spremenljivke (G_)
$g_trenutni_uporabnik â€“ podatki prijavljenega uporabnika
$g_aktivni_modul â€“ ime trenutno aktivnega modula
$g_tema â€“ aktivna tema (svetla/temna)
$g_postavitev â€“ postavitev strani

Moduli
Samostojni, lahko delujejo izven glavnega sistema
Obvezne datoteke: konfiguracija.php, index.php
PriporoÄena: funkcije.php, predloge/, sredstva/
Demo modul: lokalne spremenljivke
Globalni modul: uporablja $Globals in predpone m_


Centralni objekt $Seja
Lastnosti (properties):
$Seja->uporabnik_prijavljen    // true/false
$Seja->uporabnik_id           // ID uporabnika
$Seja->uporabnik_ime          // UporabniÅ¡ko ime
$Seja->uporabnik_vloga        // 'gost', 'uporabnik', 'administrator'
$Seja->csrf_zeton             // CSRF Å¾eton
$Seja->omejitev_zahtev        // Omejevanje pogostosti
Metode (methods):
$Seja->zaÄni_sejo()
$Seja->prijava($uporabnik)
$Seja->odjava()
$Seja->generiraj_csrf_zeton()
$Seja->preveri_csrf_zeton($Å¾eton)
$Seja->preveri_prijavo()
$Seja->preveri_pravice($vloga)
$Seja->zahtevaj_vlogo($vloga)
$Seja->preveri_omejitev_zahtevkov($kljuÄ, $omejitev, $Äas)

// konfiguracija.php
return [
    'ime' => 'Moj Prvi Modul',
    'opis' => 'Preizkusni modul',
    'vloga' => 'uporabnik'
];

// funkcije.php
function m_moj_modul_pozdrav() {
    return "Pozdravljeni iz mojega modula!";
}

// index.php
ob_start();
?>
<div>
    <h1>Moj Prvi Modul</h1>
    <p><?= m_moj_modul_pozdrav() ?></p>
</div>
<?php
return ob_get_clean();
UI funkcije
ui_glava($nastavitve)
ui_noga($nastavitve)
ui_navigacija()
ui_obvestila(), ui_dodaj_obvestilo($sporoÄilo, $tip)
PomoÅ¾ne: ui_formatiraj_datum(), ui_skrajÅ¡aj_besedilo(), ui_paginacija()

XI funkcije â€“ logika in izraÄuni
Sanitizacija (xi_sanitiziraj_vhod)
Preverjanje emaila (xi_preveri_email)
Hashiranje gesla (xi_generiraj_hash_gesla)
BeleÅ¾enje napak/operacij (xi_zabeleÅ¾i_napako, xi_zabeleÅ¾i_operacijo)
Preusmeritve (xi_preusmeri)

Varnost
CSRF zaÅ¡Äita
Omejevanje zahtevkov
Sanitizacija vhodov
Privilegiji modulov
Demo modul omejen, globalni modul poln dostop
ÄŒe Å¾eliÅ¡, lahko zdaj naredim polni PHP bootstrap loader, ki bo Å¾e vse to implementiral:
Inicializacija $Globals (Ether/Sidro/Svet/Voda/Zrak)
$Seja objekt s CSRF in omejitvami
Modularni loader, ki preveri $g_aktivni_modul in privilegije
UI funkcije + XI funkcije
Primer minimalnega inicializacijskega klica modula
Ali naj to pripravim zdaj?

xi_sanitiziraj_vhod($vhod)
xi_preveri_email($email)
xi_generiraj_hash_gesla($geslo)
xi_preveri_geslo($geslo, $hash)
xi_zabelezi_napako($sporocilo)
xi_zabelezi_operacijo($sporocilo)
xi_preusmeri($url)
xi_preberi_json($pot)
xi_shrani_json($pot, $podatki)