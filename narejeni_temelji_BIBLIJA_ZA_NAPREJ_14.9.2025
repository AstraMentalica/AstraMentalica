ğŸŒŒ AstraMentalica - KonÄna Struktura in PoroÄilo
ğŸ“ Popolna Mapna Struktura
text
/astramentalica/
â”‚
â”œâ”€â”€ ğŸŒŸ index.php                 # Glavna portalna stran
â”œâ”€â”€ ğŸŒŸ index_demo.php            # Demo razliÄica
â”‚
â”œâ”€â”€ ğŸ“‚ jedro/                    # Jedrne sistemske datoteke
â”‚   â”œâ”€â”€ ğŸ—„ï¸ baza.php              # Povezava s podatkovno bazo
â”‚   â”œâ”€â”€ ğŸ›¡ï¸ varnost.php           # Varnostne funkcije (CSRF, hash)
â”‚   â”œâ”€â”€ ğŸ”§ funkcije.php          # PomoÅ¾ne funkcije
â”‚   â”œâ”€â”€ âš™ï¸ konfiguracija.php      # Konfiguracijske nastavitve
â”‚   â”œâ”€â”€ ğŸ“œ pravice.json          # Definicije pravic (uporabnik/vip/admin)
â”‚   â””â”€â”€ ğŸ“Š logi.json             # Sistemski dnevnik
â”‚
â”œâ”€â”€ ğŸ“‚ sistem/                   # Administratorski sistem
â”‚   â”œâ”€â”€ ğŸ–¥ï¸ nadzor.php            # Nadzorna ploÅ¡Äa
â”‚   â”œâ”€â”€ ğŸ‘ï¸ pregled.php           # Pregled modulov in stanja
â”‚   â”œâ”€â”€ ğŸ¤– obdelovalnik_ai.php          # Glavni razred za AI obdelavo
â”‚   â”œâ”€â”€ ğŸŒ gpt_povezava.php             # API endpoint za AI komunikacijo
â”‚   â””â”€â”€ ğŸ“Š ai_dnevnik.php               # BeleÅ¾enje AI dejavnosti (prihodnost)
â”‚
â”œâ”€â”€ ğŸ“‚ uporabniki/               # Upravljanje uporabnikov
â”‚   â”œâ”€â”€ ğŸ” prijava.php           # Prijavni obrazec
â”‚   â”œâ”€â”€ ğŸ“ registracija.php      # Registracijski obrazec
â”‚   â”œâ”€â”€ ğŸšª odjava.php            # Odjava uporabnika
â”‚   â”œâ”€â”€ ğŸ”‘ geslo_spremeni.php    # Sprememba gesla
â”‚   â””â”€â”€ ğŸ“‚ [id_uporabnika]/      # Osebne mape uporabnikov
â”‚       â”œâ”€â”€ ğŸ“„ profil.json       # Profilni podatki
â”‚       â””â”€â”€ ğŸ“„ passport.json     # Dostopne pravice
â”‚
â”œâ”€â”€ ğŸ“‚ moduli/                   # Vsi moduli (100% samostojni)
â”‚   â”œâ”€â”€ ğŸ“‚ template/             # Vzorec modula
â”‚   â”‚   â”œâ”€â”€ ğŸŒ index.php         # Glavna vstopna toÄka
â”‚   â”‚   â”œâ”€â”€ ğŸ“‹ manifest.json     # Konfiguracija modula
â”‚   â”‚   â”œâ”€â”€ ğŸ“ dnevnik.json      # Dnevnik modula
â”‚   â”‚   â”œâ”€â”€ ğŸ¨ stil.css          # Slogi modula
â”‚   â”‚   â””â”€â”€ âš¡ skripta.js        # JavaScript modula
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ orakleum/             # Neprizanesljivi tarot
â”‚   â”œâ”€â”€ ğŸ“‚ codex/                # Å½iva knjiga znanja
â”‚   â”œâ”€â”€ ğŸ“‚ aetheris/             # Duhovne raziskave
â”‚   â”œâ”€â”€ ğŸ“‚ celestara/            # AstroloÅ¡ki vidiki
â”‚   â”œâ”€â”€ ğŸ“‚ synera/               # VIP skupnost (VIP dostop)
â”‚   â””â”€â”€ ğŸ“‚ mystaia/              # Duhovna trgovina
â”‚
â”œâ”€â”€ ğŸ“‚ datoteke/                 # Datoteke modulov
â”‚   â”œâ”€â”€ ğŸ“‚ mystaia/              # Trgovinske datoteke
â”‚   â””â”€â”€ ğŸ“‚ codex/                # PDF in dokumenti
â”‚
â””â”€â”€ ğŸ“‚ globalno/                 # Globalne datoteke
    â”œâ”€â”€ ğŸ“‚ datoteke/             # Skupne datoteke
    â”‚   â”œâ”€â”€ ğŸ“‚ ikone/            # Ikone in simboli
    â”‚   â”œâ”€â”€ ğŸµ glasba.mp3        # Ozadjska glasba
    â”‚   â””â”€â”€ ğŸ“‚ slike/            # Slike in ozadja
    â”‚
    â”œâ”€â”€ ğŸ¨ stil.css              # Globalni slogi
    â”œâ”€â”€ âš¡ skripta.js            # Globalna JavaScript logika
    â”œâ”€â”€ ğŸ‘¤ glava.php             # Globalna glava strani
    â””â”€â”€ ğŸ‘£ noga.php              # Globalna noga strani
	uporabniki/
â”œâ”€â”€ âŒ ğŸ” prijava.php             # MANJKA - Prijavni obrazec
â”œâ”€â”€ âŒ ğŸ“ registracija.php        # MANJKA - Registracijski obrazec  
â”œâ”€â”€ âŒ ğŸšª odjava.php              # MANJKA - Odjava uporabnika
â”œâ”€â”€ âŒ ğŸ”‘ geslo_spremeni.php      # MANJKA - Sprememba gesla
â””â”€â”€ âŒ ğŸ“‚ [id_uporabnika]/        # MANJKA - Osebne mape uporabnikov
	ğŸ”§ TehniÄne Specifikacije
	
	
	ğŸ“‹ Povzetek pravil:
âœ… Vse datoteke zaÄnejo s PHP - za nastavitve in preverjanje dostopa
âœ… Nastavitev $aktivna_stran - za oznaÄevanje menija v glavi
âœ… VkljuÄitev glave - include_once __DIR__ . '/../globalno/glava.php';
âœ… Vsebina v <main> - celotna vsebina znotraj portal-container
âœ… VkljuÄitev noge - include_once __DIR__ . '/../globalno/noga.php';
âœ… Brez podvajanja HTML - ne vkljuÄuje <html>, <head>, <body>



Podatkovna Baza Struktura
sql
-- Tabela uporabniki
CREATE TABLE uporabniki (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    ime VARCHAR(50) NOT NULL,
    priimek VARCHAR(50) NOT NULL,
    geslo VARCHAR(255) NOT NULL,
    mail VARCHAR(100) UNIQUE NOT NULL,
    vloga ENUM('uporabnik', 'vip', 'admin') DEFAULT 'uporabnik',
    datum_registracije DATETIME DEFAULT CURRENT_TIMESTAMP,
    zadnja_prijava DATETIME NULL,
    aktiviran BOOLEAN DEFAULT FALSE,
    token VARCHAR(255) NULL
);

-- Tabela logi
CREATE TABLE logi (
    id INT AUTO_INCREMENT PRIMARY KEY,
    tip ENUM('info', 'opozorilo', 'napaka', 'varnost', 'sistem') DEFAULT 'info',
    sporocilo TEXT NOT NULL,
    uporabnik_id INT NULL,
    ip VARCHAR(45) NULL,
    user_agent TEXT NULL,
    datum DATETIME DEFAULT CURRENT_TIMESTAMP
);
Globalne Spremenljivke in Konstante
php
// V konfiguracija.php
define('DB_HOST', 'localhost');
define('DB_NAME', 'orakleum_uporabniki');
define('DB_USER', 'orakleum_orakleum');
define('DB_PASS', 'Triglav.g.1');
define('DEEPSEEK_API_KEY', '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');
define('GEMINI_API_KEY', 'AIzaSyAsPB1bvS-FartSkSRE3e3CkUkNhK8xmEs');
define('PORTAL_IME', 'AstraMentalica');
define('PORTAL_URL', 'http://astramentalica.com');
define('CSRF_TOKEN_LIFE', 3600);
Session Spremenljivke
php
$_SESSION['uporabnik_id']        # ID uporabnika
$_SESSION['uporabnik_ime']       # Polno ime
$_SESSION['username']            # UporabniÅ¡ko ime  
$_SESSION['vloga']               # Vloga (uporabnik/vip/admin)
$_SESSION['je_prijavljen']       # Status prijave
$_SESSION['je_admin']            # Admin status
$_SESSION['je_vip']              # VIP status

ğŸ¨ CSS Spremenljivke (Globalne)
css

ğŸ” Varnostni Mehanizmi
Hashiranje Gesel
php
$hash = password_hash($geslo, PASSWORD_DEFAULT);
$is_valid = password_verify($vneseno_geslo, $hash);
CSRF ZaÅ¡Äita
php
// Generiranje tokena
$token = bin2hex(random_bytes(32));
$_SESSION['csrf_token'] = $token;

// Preverjanje tokena
if (!hash_equals($_SESSION['csrf_token'], $poslani_token)) {
    die('CSRF napad prepoznan!');
}
Sanitizacija Vnosa
php
function sanitiziraj_vnos($podatki) {
    return htmlspecialchars(trim($podatki), ENT_QUOTES, 'UTF-8');
}
ğŸ“Š API Dostopi
Globalne Funkcije za Module
php
// Dostop do baze
$baza->pridobiVse("SELECT * FROM tabela");
$baza->pridobiVrstico("SELECT * FROM tabela WHERE id = ?", [$id]);
$baza->vstavi('tabela', $podatki);
$baza->posodobi('tabela', $spremembe, 'pogoj', $parametri);

// BeleÅ¾enje dogodkov
zapisi_log('tip', 'sporoÄilo', $uporabnik_id);


1. Ustvarjanje Novega Modula
2. Prilagoditev Manifesta
json
{
    "ime": "nov_modul",
    "naslov": "Nov Modul",
    "opis": "Opis modula",
    "avtor": "VaÅ¡e ime",
    "verzija": "1.0.0",
    "dostop": "uporabnik", // ali "vip" ali "admin"
    "odvisnosti": []
}

4. VkljuÄevanje Slogov
Globalni stil je vedno vkljuÄen, lokalni stil modula se lahko doda po potrebi.
!!!!!!!!!!<link rel="stylesheet" href="/globalno/stil.css">
<link rel="stylesheet" href="stil.css"> <!-- Slogi modula -->


Implementacija Modulov - Razvoj posameznih modulov

Optimizacija - IzboljÅ¡ave performanc in varnosti


